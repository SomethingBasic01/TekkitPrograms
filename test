-- This function detects and wraps all peripherals into a single modem network
local function detectAndWrapPeripherals()
    peripheral.find("modem", rednet.open) -- Ensure the modem network is open

    -- Wrap peripherals by name
    local chest = peripheral.wrap("minecraft:chest_15")
    local dispenser = peripheral.wrap("minecraft:dispenser_1")

    if chest and dispenser then
        print("Peripherals wrapped successfully.")
        return chest, dispenser
    else
        print("Failed to detect necessary peripherals.")
        return nil, nil
    end
end

-- Use the function to detect and wrap
local chest, dispenser = detectAndWrapPeripherals()

-- Example of pushing items into the chest
if chest and dispenser then
    -- Pull items from the dispenser and push to the chest
    local success = dispenser.pushItems(peripheral.getName(chest), 1)
    if success > 0 then
        print("Items transferred successfully.")
    else
        print("Failed to transfer items.")
    end
else
    print("Cannot proceed, peripherals not found.")
end
